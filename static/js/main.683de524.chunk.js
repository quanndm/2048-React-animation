(this["webpackJsonpreact-2048"]=this["webpackJsonpreact-2048"]||[]).push([[0],{12:function(t,e,i){},13:function(t,e,i){},14:function(t,e,i){"use strict";i.r(e);var s=i(1),n=i.n(s),o=i(5),r=i.n(o),l=i(6),a=i(0),c=function(t){var e=t.tile,i=["tile"];i.push("tile"+e.value),e.mergedInto||i.push("position_".concat(e.row,"_").concat(e.column)),e.mergedInto&&i.push("merged"),e.isNew()&&i.push("new"),e.hasMoved()&&(i.push("row_from_".concat(e.fromRow(),"_to_").concat(e.toRow())),i.push("column_from_".concat(e.fromColumn(),"_to_").concat(e.toColumn())),i.push("isMoving"));var s=i.join(" ");return Object(a.jsx)("span",{className:s})},u=function(){return Object(a.jsx)("span",{className:"cell"})},h=i.p+"static/media/try-again.4f930231.gif",d=function(t){var e=t.onRestart,i=t.board;return i.hasWon()?Object(a.jsx)("div",{className:"tile2048"}):i.hasLost()?Object(a.jsx)("div",{className:"gameOver",onClick:e,children:Object(a.jsx)("img",{src:h,alt:"Try again",style:{width:"100%",height:"100%",cursor:"pointer"}})}):null},f=i(3),v=i(4),m=function(t){for(var e=t.length,i=t[0].length,s=[],n=0;n<e;++n){s.push([]);for(var o=0;o<i;++o)s[n][o]=t[o][i-n-1]}return s},j=function(){function t(e,i,s){Object(f.a)(this,t),this.value=e||0,this.row=i||-1,this.column=s||-1,this.oldRow=-1,this.oldColumn=-1,this.markForDeletion=!1,this.mergedInto=null,this.id=this.id++||0}return Object(v.a)(t,[{key:"moveTo",value:function(t,e){this.oldRow=this.row,this.oldColumn=this.column,this.row=t,this.column=e}},{key:"isNew",value:function(){return-1===this.oldRow&&!this.mergedInto}},{key:"hasMoved",value:function(){return-1!==this.fromRow()&&(this.fromRow()!==this.toRow()||this.fromColumn()!==this.toColumn())||this.mergedInto}},{key:"fromRow",value:function(){return this.mergedInto?this.row:this.oldRow}},{key:"fromColumn",value:function(){return this.mergedInto?this.column:this.oldColumn}},{key:"toRow",value:function(){return this.mergedInto?this.mergedInto.row:this.row}},{key:"toColumn",value:function(){return this.mergedInto?this.mergedInto.column:this.column}}]),t}(),b=function(){function t(){Object(f.a)(this,t),this.tiles=[],this.cells=[],this.score=0,this.size=4,this.fourProbability=.1,this.deltaX=[-1,0,1,0],this.deltaY=[0,-1,0,1];for(var e=0;e<this.size;++e)this.cells[e]=[this.addTile(),this.addTile(),this.addTile(),this.addTile()];this.addRandomTile(),this.addRandomTile(),this.setPositions(),this.won=!1}return Object(v.a)(t,[{key:"addTile",value:function(t){var e=new j(t);return this.tiles.push(e),e}},{key:"moveLeft",value:function(){for(var t=!1,e=0;e<this.size;++e){for(var i=this.cells[e].filter((function(t){return 0!==t.value})),s=[],n=0;n<this.size;++n){var o=i.length?i.shift():this.addTile();if(i.length>0&&i[0].value===o.value){var r=o;o=this.addTile(o.value),r.mergedInto=o;var l=i.shift();l.mergedInto=o,o.value+=l.value,this.score+=r.value+l.value}s[n]=o,this.won|=2048===o.value,t|=o.value!==this.cells[e][n].value}this.cells[e]=s}return t}},{key:"setPositions",value:function(){this.cells.forEach((function(t,e){t.forEach((function(t,i){t.oldRow=t.row,t.oldColumn=t.column,t.row=e,t.column=i,t.markForDeletion=!1}))}))}},{key:"addRandomTile",value:function(){for(var t=[],e=0;e<this.size;++e)for(var i=0;i<this.size;++i)0===this.cells[e][i].value&&t.push({r:e,c:i});var s=t[~~(Math.random()*t.length)],n=Math.random()<this.fourProbability?4:2;this.cells[s.r][s.c]=this.addTile(n)}},{key:"move",value:function(t){this.clearOldTiles();for(var e=0;e<t;++e)this.cells=m(this.cells);for(var i=this.moveLeft(),s=t;s<4;++s)this.cells=m(this.cells);return i&&this.addRandomTile(),this.setPositions(),this}},{key:"clearOldTiles",value:function(){this.tiles=this.tiles.filter((function(t){return!1===t.markForDeletion})),this.tiles.forEach((function(t){t.markForDeletion=!0}))}},{key:"hasWon",value:function(){return this.won}},{key:"hasLost",value:function(){for(var t=!1,e=0;e<this.size;++e)for(var i=0;i<this.size;++i){t|=0===this.cells[e][i].value;for(var s=0;s<4;++s){var n=e+this.deltaX[s],o=i+this.deltaY[s];n<0||n>=this.size||o<0||o>=this.size||(t|=this.cells[e][i].value===this.cells[n][o].value)}}return!t}}]),t}();var w=function(){var t=Object(s.useState)(new b),e=Object(l.a)(t,2),i=e[0],n=e[1];!function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(s.useEffect)((function(){return window.addEventListener(t,e,i),function(){window.removeEventListener(t,e,i)}}))}("keydown",(function(t){if(!i.hasWon()&&t.keyCode>=37&&t.keyCode<=40){var e=t.keyCode-37,s=Object.assign(Object.create(Object.getPrototypeOf(i)),i).move(e);n(s)}}));var o=function(){n(new b)},r=i.cells.map((function(t,e){return Object(a.jsx)("div",{children:t.map((function(t,e){return Object(a.jsx)(u,{},e)}))},e)})),h=i.tiles.filter((function(t){return 0!==t.value})).map((function(t,e){return Object(a.jsx)(c,{tile:t},e)}));return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"details-box",children:[Object(a.jsx)("div",{className:"resetButton",onClick:function(){return o()},children:"New game"}),Object(a.jsxs)("div",{className:"score-box",children:[Object(a.jsx)("div",{className:"score-header",children:"SCORE"}),Object(a.jsx)("div",{children:i.score})]})]}),Object(a.jsxs)("div",{className:"board",children:[r,h,Object(a.jsx)(d,{board:i,onRestart:o})]})]})};var O=function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(w,{})})};i(12),i(13);r.a.render(Object(a.jsx)(n.a.StrictMode,{children:Object(a.jsx)(O,{})}),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.683de524.chunk.js.map